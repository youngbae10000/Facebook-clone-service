(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,a){e.exports=a(93)},45:function(e,t,a){},46:function(e,t,a){},54:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),o=a.n(c),s=(a(44),a(45),a(46),a(7)),l=a(94),u=a(95),i=a(96),m=a(97),p=a(98),f=a(99),d=a(100),E=a(10),h=a(9),g=(a(54),a(19)),b=a(21),v=a(5),w=a(20),O=a.n(w),N=function(){return localStorage.getItem("auth_token")},j={postUesrId:null,auth:function(){var e=localStorage.getItem("auth_token");return e?O()(e):null}(),posts:[],friends:[],query:{},comments:{},postModalOpened:!1},y=Object(n.createContext)(),k=function(e,t){switch(t.type){case"login":return Object(v.a)({},e,{auth:t.auth});case"logout":return Object(v.a)({},j,{auth:null});case"newPostCreated":return Object(v.a)({},e,{posts:[t.post].concat(Object(b.a)(e.posts))});case"appendPosts":return Object(v.a)({},e,{posts:t.query.offset!=e.query.offset?[].concat(Object(b.a)(e.posts),Object(b.a)(t.posts)):e.posts,query:t.query,postUesrId:t.postUesrId});case"getPosts":return Object(v.a)({},e,{posts:t.posts,query:t.query,postUesrId:t.postUesrId});case"getComments":return Object(v.a)({},e,{comments:Object(v.a)({},e.comments,Object(g.a)({},t.postId,t.comments))});case"getFriedns":return Object(v.a)({},e,{friends:t.friends});case"updatePost":return Object(v.a)({},e,{posts:e.posts.map(function(e){return e.seq===t.post.seq?t.post:e})});case"openPostModal":return Object(v.a)({},e,{postModalOpened:!0});case"togglePostModal":return Object(v.a)({},e,{postModalOpened:t.postModalOpened});default:return e}},C=function(e){var t=e.reducer,a=e.initialState,c=e.children;return r.a.createElement(y.Provider,{value:Object(n.useReducer)(t,a)},c)},x=function(){return Object(n.useContext)(y)},I=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1],o=x(),g=Object(s.a)(o,2),b=g[0].auth,v=g[1];return r.a.createElement(l.a,{fixed:"true",color:"blue",dark:!0,expand:"md",sticky:"top"},r.a.createElement(h.a,{to:"/"},r.a.createElement(u.a,{tag:"span",className:"mr-auto"},r.a.createElement("img",{src:"/img/bi-symbol-light.png",alt:"\ud504\ub85c\uadf8\ub798\uba38\uc2a4 \ub85c\uace0"}))),r.a.createElement(i.a,{onClick:function(){c(!a)},className:"mr-2"}),r.a.createElement(m.a,{isOpen:a,navbar:!0},r.a.createElement(p.a,{navbar:!0,className:"mr-auto"},b&&r.a.createElement(f.a,null,r.a.createElement(d.a,{onClick:function(){return v({type:"openPostModal"})}},r.a.createElement(E.g,{icon:E.e,size:"small"})," \uacf5\uc720\ud558\uae30")),b&&r.a.createElement(f.a,null,r.a.createElement(h.a,{to:"/friends"},r.a.createElement(d.a,{tag:"span"},r.a.createElement(E.g,{icon:E.c,size:"small"})," \uce5c\uad6c")))),null!=b?r.a.createElement(p.a,{navbar:!0},r.a.createElement(f.a,null,r.a.createElement(d.a,{tag:"span"},b.name?b.name:b.email)),r.a.createElement(f.a,null,r.a.createElement(d.a,{onClick:function(){return localStorage.removeItem("auth_token"),v({type:"logout"}),!1}},"\ub85c\uadf8\uc544\uc6c3"))):r.a.createElement(p.a,{navbar:!0},r.a.createElement(f.a,null,r.a.createElement(h.a,{to:"/login"},r.a.createElement(d.a,{tag:"span"},"\ub85c\uadf8\uc778"))),r.a.createElement(f.a,null,r.a.createElement(h.a,{to:"/signup"},r.a.createElement(d.a,{tag:"span"},"\ud68c\uc6d0\uac00\uc785"))))))},q=(a(64),a(101)),S=(a(65),a(12)),P=a.n(S),M="/api";function T(e){var t=e.email,a=e.passwd;return P.a.post("".concat(M,"/auth"),{principal:t,credentials:a}).then(function(e){return e.data}).then(function(e){if(!e.success)throw new Error;return e.response})}function _(e,t){return P.a.get("".concat(M,"/user/").concat(e,"/post/").concat(t,"/comment/list"),Object(v.a)({},U())).then(function(e){return e.data}).then(function(e){if(!e.success)throw new Error(e.error.message);return e.response})}function U(){return N()?{headers:{api_key:"Bearer "+N()}}:{}}P.a.defaults.headers.post["Content-Type"]="application/json";var F=a(16),z=a.n(F),L=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"contents-accounts inline-items"},r.a.createElement("div",{className:"contents-date"},r.a.createElement("a",{className:"h6 post__author-name",href:"#"},e.writer.name),r.a.createElement("div",{className:"published-date"},r.a.createElement(z.a,{fromNow:!0,ago:!0},e.createAt)))),r.a.createElement("p",null,e.contents))};function K(e){var t=x(),a=Object(s.a)(t,2),c=a[0],o=c.postUesrId,l=c.comments,u=a[1],i=Object(n.useState)(""),m=Object(s.a)(i,2),p=m[0],f=m[1],d=function(t){u({type:"getComments",postId:e.postId,comments:t})};Object(n.useEffect)(function(){_(o,e.postId).then(d)},[]);var E=l[e.postId]||[];return r.a.createElement("ul",{className:"comments"},E.map(function(e){return r.a.createElement("li",{className:"comment",key:e.seq},r.a.createElement(L,e))}),r.a.createElement("form",{className:"comment-form inline-items"},r.a.createElement("div",{className:"contents-accounts inline-items"},r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{value:p,onChange:function(e){return f(e.target.value)},className:"form-control",placeholder:""}))),r.a.createElement(q.a,{color:"primary",onClick:function(t){if(0===p.length)return!1;var a,n,r;(a=o,n=e.postId,r=p,P.a.post("".concat(M,"/user/").concat(a,"/post/").concat(n,"/comment"),{contents:r},U()).then(function(e){return e.data}).then(function(e){if(!e.success)throw new Error;return e.response})).then(function(t){return _(o,e.postId)}).then(d).then(function(e){return f("")}).catch(alert)}},"\uacf5\uc720\ud558\uae30")))}function R(e){return r.a.createElement("div",{className:"ui-box"},r.a.createElement("article",{className:"contents"},r.a.createElement("div",{className:"contents-accounts inline-items"},r.a.createElement("div",{className:"contents-date"},r.a.createElement("a",{className:"h6 contents-accounts-name"},e.username),r.a.createElement("div",{className:"published-date"},r.a.createElement(z.a,{fromNow:!0,ago:!0},e.createAt))),r.a.createElement("div",{className:"more"},r.a.createElement(E.g,{icon:E.b,size:"small"}),r.a.createElement("ul",{className:"featured-dropdown"},r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"\uac8c\uc2dc\ubb3c \uc218\uc815")),r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"\uac8c\uc2dc\ubb3c \uc0ad\uc81c"))))),r.a.createElement("p",null,e.contents),r.a.createElement("div",{className:"contents-info inline-items"},r.a.createElement("a",{href:"#",onClick:e.onLikeClick},r.a.createElement("div",{className:"contents-icon inline-items"+(e.likesOfMe?" likesOfMe":"")},r.a.createElement(E.g,{icon:E.f,size:"small"}),r.a.createElement("span",null,e.likes,"\uac1c"))),r.a.createElement("a",{href:""},r.a.createElement("div",{className:"reply"},r.a.createElement(E.g,{icon:E.a,size:"small"}),r.a.createElement("span",null,e.comments,"\uac1c"))))),r.a.createElement(K,{postId:e.seq,userId:e.userId}))}a(86);var B=function(e){var t=e.friendId,a=x(),c=Object(s.a)(a,2),o=c[0],l=o.posts,u=o.auth,i=c[1],m=Object(n.useState)(null),p=Object(s.a)(m,2),f=p[0],d=p[1],E=Object(n.useState)({offset:0,limit:5}),g=Object(s.a)(E,2),b=g[0],w=g[1],O=Object(n.useRef)(b),N=Object(n.useRef)(l);Object(n.useEffect)(function(){O.current={offset:b.offset,limit:b.limit}}),Object(n.useEffect)(function(){N.current=l});var j=function(e){d(null),i({type:0===b.offset?"getPosts":"appendPosts",posts:e,query:b,postUesrId:t||u.userKey})},y=function(e){console.error(e),404===e.response.status&&d("\uc0ac\uc6a9\uc790\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")},k=function(e){var t=document.documentElement,a=Math.max(window.pageYOffset,t.scrollTop,document.body.scrollTop)+window.innerHeight,n=t.offsetHeight;Math.round(a)==n&&N.current.length==O.current.offset+5&&w({offset:O.current.offset+5,limit:5})};Object(n.useEffect)(function(){return window.addEventListener("scroll",k),function(){window.addEventListener("scroll",k)}},[]),Object(n.useEffect)(function(){(t||u)&&function(e,t){var a=t.offset,n=t.limit;return P.a.get("".concat(M,"/user/").concat(e,"/post/list"),Object(v.a)({},U(),{params:{offset:a,limit:n}})).then(function(e){return e.data}).then(function(e){if(!e.success)throw new Error(e.error.message);return e.response})}(t||u.userKey,b).then(j).catch(y)},[t,b]);var C=function(e){var a,n;(a=t||u.userKey,n=e.seq,P.a.patch("".concat(M,"/user/").concat(a,"/post/").concat(n,"/like"),{},U()).then(function(e){return e.data}).then(function(e){if(!e.success)throw new Error;return e.response})).then(function(t){console.log(e),i({type:"updatePost",post:t})})};return r.a.createElement("div",{className:"row"},f?r.a.createElement("div",{className:"col-12 text-center mt-5"},r.a.createElement("h1",null,f)," "):t?l.map(function(e){return r.a.createElement(R,Object.assign({key:e.seq},e,{username:e.writer?e.writer.name:e.writer.email.address,onLikeClick:function(t){C(e),t.preventDefault()}}))}):u?l.map(function(e){return r.a.createElement(R,Object.assign({key:e.seq},e,{username:u.name?u.name:u.email,onLikeClick:function(t){C(e),t.preventDefault()}}))}):r.a.createElement(h.b,{to:"/login",noThrow:!0}))},Y=(a(87),function(e){return r.a.createElement("li",null,r.a.createElement("div",{className:"user-thumb"}),r.a.createElement("div",{className:"noti-text"},r.a.createElement(h.a,{to:"./".concat(e.seq),className:"h6 noti-account"},e.name?e.name:e.email.address)),r.a.createElement("span",{className:"noti-icon"},r.a.createElement(q.a,{color:"danger"},r.a.createElement(E.g,{icon:E.d,size:"small"})," \uce5c\uad6c \uc81c\uac70")))}),A=function(){var e=x(),t=Object(s.a)(e,2),a=t[0].friends,c=t[1];return Object(n.useEffect)(function(){P.a.get("".concat(M,"/user/connections"),U()).then(function(e){return e.data}).then(function(e){if(!e.success)throw new Error(e.error.message);return e.response}).then(function(e){c({type:"getFriedns",friends:e})})},[a.length]),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"ui-box"},r.a.createElement("div",{className:"dropdown-title"},r.a.createElement("h6",{className:"title"},"\uce5c\uad6c\ubaa9\ub85d")),r.a.createElement("ul",{className:"noti-list friend-requests"},a.length>0?a.map(function(e){return r.a.createElement(Y,Object.assign({key:e.seq},e))}):r.a.createElement("li",null,"\uce5c\uad6c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."))))},D=a(25),H=a.n(D),J=a(38),W=(a(90),function(){var e=r.a.useState(""),t=Object(s.a)(e,2),a=t[0],n=t[1],c=r.a.useState(""),o=Object(s.a)(c,2),l=o[0],u=o[1],i=x(),m=Object(s.a)(i,2),p=m[0].auth,f=m[1];if(p)return r.a.createElement(h.b,{to:"/",noThrow:!0});var d=function(){var e=Object(J.a)(H.a.mark(function e(){var t,n;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T({email:a,passwd:l});case 3:t=e.sent,n=O()(t.apiToken),localStorage.setItem("auth_token",t.apiToken),f({type:"login",auth:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert(e.t0);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"text-center login-title"},"\uc6f9 \ud2b8\ub799 \ub85c\uadf8\uc778"),r.a.createElement("div",{className:"account-wall"},r.a.createElement("form",{className:"form-signin"},r.a.createElement("input",{type:"email",value:a,onChange:function(e){n(e.currentTarget.value)},className:"form-control",placeholder:"Email",required:!0,autoFocus:!0}),r.a.createElement("input",{type:"password",value:l,onChange:function(e){u(e.currentTarget.value)},className:"form-control",placeholder:"Password",required:!0}),r.a.createElement("button",{onClick:function(){return d(),!1},className:"btn btn-lg btn-primary btn-block",type:"button"},"\ub85c\uadf8\uc778"))),r.a.createElement("p",{className:"text-help text-center"},"\uacc4\uc815\uc774 \ud544\uc694\ud558\uc2e0\uac00\uc694?"," ",r.a.createElement(h.a,{to:"/signup",className:"text-center new-account"},"\uacc4\uc815 \ub9cc\ub4e4\uae30")))}),$=(a(91),function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(s.a)(o,2),u=l[0],i=l[1],m=Object(n.useState)(""),p=Object(s.a)(m,2),f=p[0],d=p[1],E=Object(n.useState)(""),g=Object(s.a)(E,2),b=g[0],v=g[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"text-center signup-title"},"\uacc4\uc815 \ub9cc\ub4e4\uae30"),r.a.createElement("div",{className:"account-wall"},r.a.createElement("form",{className:"form-signup"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-input",name:"email",id:"email",placeholder:"Your Email",value:a,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-input",name:"name",id:"name",placeholder:"Your Name",value:u,onChange:function(e){return i(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-input",name:"password",id:"password",placeholder:"Password",value:f,onChange:function(e){return d(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-input",name:"re_password",id:"re_password",placeholder:"Repeat your password",value:b,onChange:function(e){return v(e.target.value)}})),r.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",type:"button",onClick:function(e){var t;if(f===b)return(t=a,P.a.post("".concat(M,"/user/exists"),{address:t}).then(function(e){return e.data}).then(function(e){if(!e.success)throw new Error;return e.response})).then(function(e){if(!0===e)throw new Error("".concat(a," \ud574\ub2f9 \uc774\uba54\uc77c\uc740 \uc774\ubbf8 \uc874\uc7ac \ud569\ub2c8\ub2e4."));return function(e,t,a){return P.a.post("".concat(M,"/user/join"),{principal:e,name:t,credentials:a}).then(function(e){return e.data}).then(function(e){if(!e.success)throw new Error;return e.response})}(a,u,f)}).then(function(e){alert("".concat(a,"\ub85c \uac00\uc785\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),Object(h.d)("/login")}).catch(function(e){e.response&&alert(e.response.data.message),e.message&&alert(e.message),console.dir(e)}),!1;alert("\ud328\uc2a4\uc6cc\ub4dc\uac00 \ub3d9\uc77c\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}},"\uac00\uc785\ud558\uae30"))),r.a.createElement("p",{className:"text-help text-center"},"\uc774\ubbf8 \uacc4\uc815\uc774 \uc788\uc73c\uc2e0\uac00\uc694?"," ",r.a.createElement(h.a,{to:"/login",className:"text-center login-here"},"\ub85c\uadf8\uc778 \ud558\uae30")))}),G=a(105),Q=a(102),V=a(103),X=a(104);var Z=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],o=x(),l=Object(s.a)(o,2),u=l[0],i=u.postModalOpened,m=u.auth,p=l[1],f=function(){p({type:"togglePostModal",postModalOpened:!i})};return r.a.createElement(G.a,{isOpen:i,toggle:f,className:"post-modal"},r.a.createElement(Q.a,{toggle:f},"\uac8c\uc2dc\ubb3c \uc791\uc131"),r.a.createElement(V.a,null,r.a.createElement("form",null,r.a.createElement("textarea",{className:"form-control input-lg",autoFocus:!0,placeholder:"\ubb34\uc2a8 \uc0dd\uac01\uc744 \ud558\uace0 \uacc4\uc2e0\uac00\uc694?",spellCheck:!1,value:a,onChange:function(e){return c(e.target.value)}}))),r.a.createElement(X.a,null,r.a.createElement(q.a,{color:"primary",onClick:function(){a.length>0&&function(e){return P.a.post("".concat(M,"/post"),{contents:e},U()).then(function(e){return e.data}).then(function(e){if(!e.success)throw new Error;return e.response})}(a).then(function(e){try{Object(h.d)("/")}catch(t){console.log(t),console.dir(t)}return e}).then(function(e){p({type:"newPostCreated",post:e,postUesrId:m.userKey}),c(""),f()}).catch(function(e){e.response&&alert(e.response.data.message),console.dir(e)})}},"\uacf5\uc720\ud558\uae30")))};a(92);z.a.globalLocale="ko";var ee=function(){return r.a.createElement(C,{initialState:j,reducer:k},r.a.createElement(I,null),r.a.createElement("div",{className:"container"},r.a.createElement(h.c,null,r.a.createElement(B,{path:"/"}),r.a.createElement(A,{path:"/friends"}),r.a.createElement(B,{path:"/friends/:friendId"}),r.a.createElement(W,{path:"/login"}),r.a.createElement($,{path:"/signup"}))),r.a.createElement(Z,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,1,2]]]);
//# sourceMappingURL=main.75806e52.chunk.js.map